{"version":3,"sources":["../libs/sdk.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;sBASc,QAAQ;;;;kCACc,WAAW;;;;;;;;;;IAS1B,GAAG;AACX,WADQ,GAAG,CACV,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE;0BADd,GAAG;;AAEpB,QAAI,CAAC,MAAM,IAAI,CAAC,IAAI;AAClB,aAAO,KAAK,CAAC;KAAA,AACf,IAAI,CAAE,oBAAE,QAAQ,CAAC,MAAM,CAAC,AAAC;AACvB,aAAO,KAAK,CAAC;KAAA,AAEf,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACjB,QAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACrB,QAAI,CAAC,KAAK,GAAG,KAAK,IAAI,IAAI,CAAC;;AAE3B,QAAI,IAAI,CAAC,KAAK,EACZ,IAAI,CAAC,IAAI,EAAE,CAAC;GACf;;eAbkB,GAAG;;;;;;;;;;;WAuBlB,cAAC,GAAG,EAAE,KAAK,EAAE;AACf,UAAI,CAAC,GAAG,IAAI,CAAC,KAAK;AAChB,eAAO,KAAK,CAAC;OAAA,AACf,IAAI,CAAC,IAAI,CAAC,KAAK,EACb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAA;;AAEjB,UAAI,CAAC,KAAK,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,GAAG,KAAK,CAAC;AACtC,aAAO,IAAI,CAAC;KACb;;;;;;;;;;;WASG,gBAAG;;;AACL,UAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;AACzB,UAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;AACrB,UAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;;;AAGvB,OAAC,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC,OAAO,CAAC,UAAC,aAAa,EAAK;AAC1D,cAAK,aAAa,CAAC,GAAG,oBAxDnB,QAAQ,CAwDoB,IAAI,EAAE,aAAa,EAAE,KAAK,CAAC,CAAC;OAC5D,CAAC,CAAC;;;AAGH,YAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAK;AACnC,YAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AACxB,YAAI,GAAG,GAAG,EAAE,CAAC;;AAEb,YAAI,OAAO,KAAK,AAAC,KAAK,QAAQ,EAAE;AAC9B,aAAG,CAAC,GAAG,GAAG,KAAK,CAAC;SACjB,MAAM;AACL,cAAI,CAAC,KAAK,CAAC,GAAG,EACZ,OAAO,KAAK,CAAC;AACf,aAAG,GAAG,KAAK,CAAC;SACb;;AAED,cAAK,GAAG,CAAC,GAAG,oBAxEC,SAAS,CAwEA,IAAI,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;OACzC,CAAC,CAAC;KACJ;;;SAjEkB,GAAG;;;qBAAH,GAAG","file":"libs/sdk.js","sourcesContent":["//              ____\n//    _________/ / /__\n//   / ___/ __  / //_/\n//  (__  ) /_/ / ,<\n// /____/\\__,_/_/|_|\n//\n// @brief: a sdk factory, build sdks made easy\n// @author: [turingou](http://guoyu.me)\n\nimport _ from 'lodash'\nimport { lowLevel, highLevel } from './factory'\n\n/**\n *\n * @host[String]: the host domain\n * @routes[Object]: a object contains every route of the sdk, including its URL, method, and callback function\n * @rules[Object]: a object contains rules which append or merged into query params.\n *\n **/\nexport default class SDK {\n  constructor(host, routes, rules) {\n    if (!routes || !host) \n      return false;\n    if (!(_.isObject(routes))) \n      return false;\n\n    this.host = host;\n    this.routes = routes;\n    this.rules = rules || null;\n\n    if (this.rules) \n      this.init();\n  }\n  \n  /**\n   *\n   * Add a new rule to SDK instance\n   * @key[String]: the key word of this rule, may be `get`,`post` or `all`\n   * @value[Object]: the value of this rule, this very object will be merged in to query params,\n   * for instance, `qs` object will be merged into query string. and `form` object will be merged into post form.\n   *\n   **/\n  rule(key, value) {\n    if (!key || !value) \n      return false;\n    if (!this.rules) \n      this.rules = {}\n\n    this.rules[key.toLowerCase()] = value;\n    return this;\n  }\n\n  /**\n   *\n   * Init a SDK instance\n   * if there's no any available rules provied before ,\n   * this init function can be triggered by users and at any time they want.\n   *\n   **/\n  init() {\n    var routes = this.routes;\n    var host = this.host;\n    var rules = this.rules;\n\n    // init build-in lowlevel apis\n    ['get', 'post', 'put', 'delete'].forEach((buildInMethod) => {\n      this[buildInMethod] = lowLevel(host, buildInMethod, rules);\n    });\n\n    // init custom apis\n    Object.keys(routes).forEach((key) => {\n      var route = routes[key];\n      var api = {};\n\n      if (typeof(route) === 'string') {\n        api.url = route;\n      } else {\n        if (!route.url) \n          return false;\n        api = route;\n      }\n\n      this[key] = highLevel(host, api, rules);\n    });\n  }\n}\n"]}